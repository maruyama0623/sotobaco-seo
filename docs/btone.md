# Btone サービス情報

このファイルは、Btone（Bカート×kintone連携サービス）に関するページ・記事・問い合わせ対応を作成する際に参照するサービス固有の情報です。
会社情報・共通URLは `docs/company.md` を参照してください。

---

## サービス概要

**サービス名**: Btone
**サービス形態**: Webアプリ
**無料お試し**: 30日間（決済情報の登録不要、期間終了後に自動課金なし）
**月額料金**: ¥15,000（税抜）※年払いなし
**アカウント作成URL**: https://app.sotobaco.com/signup
**LP URL**: https://sotobaco.com/btone
**操作ガイドURL**: https://guide.sotobaco.com/btone/

---

## 導入の流れ

1. ソトバコアカウント作成（https://app.sotobaco.com/signup）
2. kintone接続設定（OAuth認証）
3. Bカート連携設定（ソトバコの「サービス連携」→ Bカートアプリストアにログイン → 連携を許可）

**注意**: Bカートアプリストアのアカウントは、Bカート管理画面のアカウントとは別です。

連携完了後、Btoneが各連携データに対応するkintoneアプリを**自動生成**します（手動でフィールドを設計する必要なし）。

---

## 連携アプリ一覧

| アプリ名 | 同期方向 | 一括同期 | 保存時同期 | 取り込み | Bカート画面遷移 | 代理ログイン | プロセス管理 |
|---------|---------|---------|-----------|---------|--------------|------------|------------|
| Bカート商品基本管理 | ↔ 相互 | ○ | ○ | ○ | ○ | - | - |
| Bカート商品セット管理 | ↔ 相互 | ○ | ○ | ○ | ○ | - | - |
| Bカートカテゴリ管理 | ↔ 相互 | ○ | ○ | ○ | - | - | - |
| Bカート特集管理 | ↔ 相互 | ○ | ○ | ○ | - | - | - |
| Bカート会員管理 | ↔ 相互 | ○ | ○ | ○ | ○ | ○ | - |
| Bカート受注管理 | ↔ 相互※ | - | ○ | ○（期間指定） | ○ | - | - |
| Bカート出荷管理 | ↔ 相互※ | - | ○ | ○（期間指定） | ○ | - | ○ |
| Bカート見積管理 | → Bカート→kintone | - | - | ○（期間指定） | ○ | - | - |

※受注管理・出荷管理: kintone→Bカートは個別同期のみ（一括同期なし）。一部フィールドはBカート→kintoneの片方向のみ。

---

## 共通機能の詳細

### マッピング設定

Bカート・kintoneのフィールドをマウス操作で対応付ける機能。

- **同期方向の矢印**:
  - `→`（右向き）: Bカート→kintoneのみ（取り込み専用）
  - `←`（左向き）: kintone→Bカートのみ（同期専用）
  - `↔`（双方向）: 両方向に同期
- Bカート側フィールドを選択すると、kintone側の選択肢が自動絞り込みされる
- サブテーブル内フィールドは「[テーブル名] - フィールド名」と表示
- **制約**: フィールド名の重複選択は不可（保存時エラー）。空欄では保存不可
- 受注・出荷連携の一部フィールドは右向き（Bカート→kintone）固定
- 商品基本・カテゴリ等は双方向固定

### 一括同期（kintone→Bカート）

kintoneの**全レコード**をBカートに一括同期する機能。

- kintoneアプリ上部の「一括同期」ボタンをクリックして実行
- **対応アプリ**: 商品基本、商品セット、会員、カテゴリ、特集（5アプリ）
- **非対応**: 受注管理、出荷管理、見積管理（これらに一括同期ボタンは表示されない）
- 同期中はブラウザを閉じないこと
- 完了時に「更新しました」メッセージが表示される

### レコード保存時の同期（kintone→Bカート）

kintoneレコードを保存するたびに、該当レコードをBカートに個別同期する機能。

- レコード詳細画面の編集 or インライン編集の両方に対応
- **非対応**: 見積管理（保存時同期なし）
- **連動動作**:
  - 受注管理でレコード保存 → 関連する出荷情報も更新される
  - 出荷管理でレコード保存 → 関連する受注情報も更新される

### Bカートからの取り込み（Bカート→kintone）

Bカートのデータをkintoneに取り込む機能。

- kintoneアプリ上部の「Bカート取り込み」ボタンをクリック
- **全アプリで利用可能**
- **期間指定**（受注管理・出荷管理・見積管理のみ）:
  - 過去7日間 / 未来7日間 / 全件
  - **全件は500件超の場合は非推奨**（処理に時間がかかる）。通常は7日間を使用
- **レコード単位の取り込み**: レコード詳細画面にもBカート取り込みボタンあり（該当レコードのみ取り込み）

### Bカート画面への遷移

kintoneレコード詳細画面から対応するBカート画面にワンクリックで遷移する機能。

- **対応アプリ**: 商品基本、商品セット、会員、受注、出荷、見積（6アプリ）
- **非対応**: カテゴリ管理、特集管理
- Bカート未ログイン時はログイン画面が表示される。ログイン済みなら直接遷移

### レコード追加の無効化

kintone側からの誤った新規レコード作成を防止する機能。

- ソトバコ設定画面で「このアプリのレコード追加を無効にする」にチェック
- 有効にするとkintoneのレコード追加ボタンが非表示になる

### ボタン表示の一覧制限

kintoneのどのレコード一覧画面に連携ボタン（取り込み・一括同期）を表示するかを制御する機能。

- 「一覧を指定する」にチェック → 表示する一覧を選択
- チェックなしの場合は全一覧にボタン表示
- **注意**: 1つもチェックしない場合、全一覧でボタンが非表示になる

### サブテーブル連携設定

複雑なデータ（表示グループ、価格、受注商品等）をkintoneのサブテーブルに同期する設定。

- **設定可能なアプリ・項目**:
  - 商品基本: 商品表示グループ、例外的に表示する会員
  - 商品セット: 商品セット表示グループ、例外的に表示する会員、価格グループ別価格、特別価格、別品番在庫参照
  - 受注: 受注商品
  - 出荷: 出荷商品
  - 見積: 見積商品
- 「設定を同期する」チェックで有効化（チェックなしの項目もあり＝自動同期）
- チェックを外しても既存データは消えない
- 取り込み先のkintoneサブテーブルを指定（デフォルトは同名テーブル）
- カスタムサブテーブルを使う場合、Bカート項目に対応するフィールドを手動で用意する

### プロセス管理設定（出荷管理のみ）

Bカートの発送状況をkintoneのプロセス管理で管理する機能。出荷管理アプリ専用。

- **前提**: マッピング設定から「発送状況」を削除してからプロセス管理を有効化する
- kintoneのプロセス管理設定で「プロセス管理を有効にする」が自動設定される
- **Btone固有ステータス「出荷キャンセル」**:
  - Bカートの発送ステータス（未発送 / 発送指示 / 発送済）に加えて作成される
  - 「出荷キャンセル」はBカートに存在しないため、kintoneで「出荷キャンセル」にしてもBカート側の発送状況は変わらない

---

## アプリ別の入力補助・表示カスタマイズ

### 商品基本管理

| 機能 | 種別 | 内容 |
|------|------|------|
| 表示フラグ | 表示カスタマイズ | 「非表示」レコードを灰色に塗りつぶし |
| 商品表示グループ | 入力補助 | チェックボックスで表示グループを選択。**Bカートは「非表示」ロジックだがBtoneは「表示」ロジック**（逆になるので注意） |
| 例外表示会員 | 入力補助 | 会員一覧から例外的に表示する会員をチェック |
| カテゴリ（メイン/サブ） | 入力補助 | モーダルで登録済みカテゴリ一覧から選択。自由入力も可能だが形式不一致で同期エラーになる |
| 商品画像URL | 入力補助 | アップロードボタン → Bカートファイルマネージャー → 画像アップロード or 既存ファイルクリックでURLコピー → kintoneフィールドに貼付 |
| 特集1〜3 | 入力補助 | モーダルで登録済み特集一覧から選択。括弧内の数字は特集ID |

### 商品セット管理

| 機能 | 種別 | 内容 |
|------|------|------|
| 表示フラグ | 表示カスタマイズ | 「非表示」レコードを灰色に塗りつぶし |
| 商品セット表示グループ | 入力補助 | チェックボックスで表示グループを選択（Btoneは「表示」ロジック） |
| 例外表示会員 | 入力補助 | 会員一覧から例外的に表示する会員をチェック |
| 価格グループ別価格 | 入力補助 | 価格グループごとに個別価格・数量割引を入力 |
| 特別価格 | 入力補助 | 会員一覧から特別価格対象の会員をチェック |
| 別品番在庫参照 | 入力補助 | 商品セット一覧から在庫参照先を選択。「在庫フラグ」=「別品番在庫参照」時のみ表示 |

### カテゴリ管理

| 機能 | 種別 | 内容 |
|------|------|------|
| メインカテゴリ商品一覧 | 表示カスタマイズ | 本カテゴリがメインカテゴリとして設定されている商品を一覧表示。50件超でページネーション。「詳細」クリックでBカート商品画面へ遷移 |
| サブカテゴリ商品一覧 | 表示カスタマイズ | 本カテゴリがサブカテゴリとして設定されている商品を一覧表示。同上 |
| 親カテゴリ | 入力補助 | モーダルで登録済みカテゴリから選択。括弧内の数字はカテゴリID |

表示カスタマイズのスペース設定は、ソトバコ設定画面でkintoneのスペースフィールドを指定する。

### 会員管理

| 機能 | 種別 | 内容 |
|------|------|------|
| 必須バリデーション | 入力補助 | 新規登録時、担当者姓・郵便番号・都道府県・市区町村・町域番地・メール・初期パスワードが空欄だとエラー |
| 同期方向による編集制限 | 入力補助 | Bカート→kintoneのみ（右向き矢印）のフィールドは編集不可にして誤操作防止 |
| 初期パスワード編集制限 | 入力補助 | 既存レコード編集時、初期パスワードフィールドは自動グレーアウト（新規登録専用のため） |
| 電話番号形式チェック | 入力補助 | ハイフン付き形式のみ受付（例: 092-XXX-XXXX） |
| 設立年月形式チェック | 入力補助 | Y-m / Y / Y-n 形式のみ受付（例: 2020-05, 2020, 2020-5） |
| 代理ログイン | ボタン | レコード詳細画面から該当会員としてBカートにログイン |

### 受注管理

| 機能 | 種別 | 内容 |
|------|------|------|
| キャンセル表示 | 表示カスタマイズ | 「対応状況」=「キャンセル」のレコードを灰色に塗りつぶし |

### 出荷管理

| 機能 | 種別 | 内容 |
|------|------|------|
| キャンセル表示 | 表示カスタマイズ | 「対応状況」=「キャンセル」のレコードを灰色に塗りつぶし |

- 出荷管理の「対応状況」は受注管理と連動: 受注管理で受注ID 34を「キャンセル」にすると、出荷管理の受注ID 34も「キャンセル」になる
- **注意**: 出荷管理の「ステータス」を「出荷キャンセル」にしてもレコードは灰色にならない（「対応状況」と「ステータス」は別フィールド）

---

## 連携に関する注意事項

- **削除は非対応**: すべてのアプリで、kintoneからBカートのデータを削除することはできない
- **受注管理**: Bカート受注ID（注文単位）ごとにレコードを管理。一部情報（注文数、単価等）はkintone→Bカートに同期不可
- **出荷管理**: Bカート発送ID（出荷単位）ごとにレコードを管理。分納・同梱はBカート側でのみ設定可能
- **見積管理**: Bカート→kintoneの片方向のみ。保存時同期なし、一括同期ボタンなし
- **受注・出荷の連動**: 受注管理のレコード保存時に関連出荷情報も更新。出荷管理のレコード保存時に関連受注情報も更新

---

## 費用（Btone + kintone）

| 項目 | 費用（税抜） |
|------|-------------|
| Btone | 月額¥15,000 |
| kintone スタンダードコース | 月額¥1,800/ユーザー（最低10ユーザー） |
| kintone 最小構成（10ユーザー） | 月額¥18,000 |
| **最小合計** | **月額¥33,000** |
| kintone ディスク追加オプション | 月額¥1,000/10GB |

- 初期費用: いずれも0円
- kintoneのディスク容量: 1ユーザーあたり5GB（10ユーザーで50GB）

---

## kintoneのデータ制限（問い合わせ対応時の参考）

| 項目 | 制限値 |
|------|--------|
| レコード数上限 | なし（100万件で快適動作を公式確認） |
| CSVインポート | 1ファイル10万行・100MBまで |
| APIレコード取得 | 1リクエスト500件 |
| API offset上限 | 10,000件 |
| API同時接続 | ドメインあたり100リクエスト |
| APIレコード登録/更新/削除 | 1リクエスト100件 |

参照: https://jp.kintone.help/k/ja/admin/limitation/limit.html

---

## 操作ガイドURL一覧

| カテゴリ | ページ | URL |
|---------|--------|-----|
| 初期設定 | Bカート連携設定 | /btone/init/setup/ |
| 基本操作 | Btoneの基本画面 | /btone/basic/overview/ |
| 共通機能 | マッピング設定 | /btone/common/mapping/ |
| 共通機能 | 一括同期 | /btone/common/sync-button/ |
| 共通機能 | レコード保存時の同期 | /btone/common/sync-onsave/ |
| 共通機能 | サブテーブル連携設定 | /btone/common/sync-subtable/ |
| 共通機能 | Bカート画面への遷移 | /btone/common/detail-button/ |
| 共通機能 | レコード追加を無効にする | /btone/common/disable-add-record/ |
| 共通機能 | Bカートからの取り込み | /btone/common/get-button/ |
| 共通機能 | ボタン表示の一覧制限 | /btone/common/restrict-views/ |
| 共通機能 | プロセス管理設定 | /btone/common/process-setting/ |
| 商品基本管理 | 入力補助・表示カスタマイズ | /btone/product/assistance-customize/ |
| 商品セット管理 | 入力補助・表示カスタマイズ | /btone/product-set/assistance-customize/ |
| カテゴリ管理 | 入力補助・表示カスタマイズ | /btone/category/assistance-customize/ |
| カテゴリ管理 | メインカテゴリのスペース設定 | /btone/category/main-category-space/ |
| カテゴリ管理 | サブカテゴリのスペース設定 | /btone/category/sub-category-space/ |
| 会員管理 | 入力補助・表示カスタマイズ | /btone/customer/assistance-customize/ |
| 会員管理 | 代理ログイン | /btone/customer/proxy-login/ |
| 受注管理 | 入力補助・表示カスタマイズ | /btone/order/assistance-customize/ |
| 出荷管理 | 入力補助・表示カスタマイズ | /btone/shipment/assistance-customize/ |

ベースURL: https://guide.sotobaco.com

---

## LP構成（現在）

| セクション | 内容 |
|-----------|------|
| Hero | 「Bカート × kintone 業務をつなぐ。」+ 30日間無料お試しCTA |
| Btoneとは？ | サービス紹介 + 連携フロー図 |
| こんな課題、ありませんか？ | ターゲットの悩み4点 |
| Btoneの特徴 | かんたん連携 / マウス操作のみで設定完了 |
| 導入までの流れ | 3ステップ（アカウント作成→kintone接続→OAuth認証） |
| 料金 | 月額¥15,000 + 30日間無料お試し + 連携可能データ一覧 |
| よくあるご質問 | FAQ 8項目 |
| CTAバナー | 30日間無料トライアル訴求 |
